{{ partial "top.html" . }}
<h1>Content in {{ or .Title (path.Base .URL) }}:</h1>
{{ $site := .Site.BaseURL }}
{{ $url := .URL }}
<!-- {{ $name := trim .URL "/blog/" }} -->
{{ $root := "./content/" }}
{{ $this := (path.Join $root $name)}}
{{ $name := last 1 (split (absURL (trim .URL "/")) "/") }}

{{ if eq (len .Pages) 0 }}
  {{ $files := (readDir $this ) }}
    {{ range $files }}
      {{ $file := path.Join $this .Name }}
      {{ $stat := os.Stat $file }}
        {{ if $stat.IsDir }}
          <h5>
            <a href="{{ $url }}/{{ .Name }}">{{ .Name }}</a>
          </h5>
        {{ end }}
    {{ end }}
{{ else }}
          {{ .Content }}
          <ul>
            {{ range $x, $y := .Pages }}
            <li>
              <a href="{{ .URL }}">{{ .Title }} </a>&nbsp;
              {{ with $y.Params.tags }}
              {{ range . }}
              <small>#<a href="{{ $site }}/tags/{{ . }}">{{ . }}</a></small>&nbsp;
              {{ end }}
              {{end}}
            </li>
            {{ end }}
          </ul>
{{ end }}
{{ partial "bottom.html" . }}
